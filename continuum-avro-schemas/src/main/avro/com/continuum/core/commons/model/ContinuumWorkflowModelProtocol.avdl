@namespace("com.continuum.core.schema.commons.model")
protocol ContinuumWorkflowModelProtocol {

  record Position {
    double x;
    double y;
  }

  record NodePort {
    string name;
    string contentType;
  }

  enum NodeStatus {
    ACTIVE,
    CONFIGURED,
    BUSY,
    SUCCESS,
    FAILED,
    WARNING,
    PRE_PROCESSING,
    POST_PROCESSING
  }

  record NodeData {
    string id;
    string description;
    string title;
    string? subTitle = null;
    string? icon = null;
    string nodeModel;
    boolean? busy = null;
    union { null, map<NodePort> } inputs = null;
    union { null, map<NodePort> } outputs = null;
    union { null, map<NestedJsonObject> } properties = null;
    union { null, map<NestedJsonObject> } propertiesSchema = null;
    union { null, map<NestedJsonObject> } propertiesUISchema = null;
    NodeStatus? status = null;
  }

  record Node {
    string id;
    string type;
    Position position;
    NodeData data;
    int width;
    int height;
    boolean selected;
    Position? positionAbsolute = null;
    boolean dragging;
  }

  record Edge {
    string id;
    string? type = null;
    boolean? animated = null;
    string source;
    string target;
    string sourceHandle;
    string targetHandle;
  }

  record ContinuumWorkflowModel {
    string id;
    string name;
    boolean active = true;
    array<Node> nodes;
    array<Edge> edges;
  }

  record NestedJsonObject {
    string? stringValue = null;
    int? intValue = null;
    double? doubleValue = null;
    boolean? booleanValue = null;
    union { null, map<NestedJsonObject>, array<NestedJsonObject> } objectValue = null;
    union { null, array<NestedJsonObject> } arrayValue = null;
  }
}